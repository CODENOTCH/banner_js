var JDMBanner=function(){function a(b,c,d){a.scope=this,this.containerJDMBanner=b,this.frameData=c,this.timelineData=d,this.dataJDMBanner,this.arrayFrames=[],this.arrayElements=[],this.imgPath="assets/img/",this.counterImg=0,this.totalImg=0,this.iteration=0,this.numTween=0,this.lastLabelName,this.configureJDMBanner(),this.addListeners()}return a.prototype.configureJDMBanner=function(){if(this.dataJDMBanner={width:this.containerJDMBanner.getAttribute("data-w"),height:this.containerJDMBanner.getAttribute("data-h"),bgColor:this.containerJDMBanner.getAttribute("data-bg-color"),border:this.containerJDMBanner.getAttribute("data-border"),preload:this.containerJDMBanner.getAttribute("data-preload"),cover:this.containerJDMBanner.getAttribute("data-cover")},this.containerJDMBanner.style.width=this.dataJDMBanner.width+"px",this.containerJDMBanner.style.height=this.dataJDMBanner.height+"px",this.containerJDMBanner.style.backgroundColor=this.dataJDMBanner.bgColor,this.containerJDMBanner.style.border=this.dataJDMBanner.border,"true"==this.dataJDMBanner.cover){var a=document.createElement("div");a.style.backgroundColor=this.dataJDMBanner.bgColor,a.style.zIndex=2,a.setAttribute("id","cover"),this.containerJDMBanner.appendChild(a)}var b=0,c=[];for(var d in this.frameData)this.arrayElements.push(this.frameData[d]),c.push(d.toString()),b++;for(var e=0;e<b;e++)this.totalImg+=this.arrayElements[e].length;for(var f=0;f<b;f++){var g=document.createElement("div");g.classList.add("frame"),g.setAttribute("id",c[f]),this.containerJDMBanner.appendChild(g),this.arrayFrames.push(g),this.setImgs(this.arrayFrames[f],this.arrayElements[f])}},a.prototype.setImgs=function(b,c){c.forEach(function(c){var d=new Image;d.src=a.scope.imgPath+c,b.appendChild(d);var e=c.indexOf("."),f=c.substr(0,e);d.setAttribute("id",f),d.onload=a.scope.imgLoaded()})},a.prototype.imgLoaded=function(){a.scope.counterImg++,a.scope.counterImg==a.scope.totalImg&&a.scope.createTimeLine()},a.prototype.createTimeLine=function(){a.scope.tl=new TimelineMax,a.scope.tl.paused(!0),a.scope.timelineData.arrayTween.forEach(function(b){switch(a.scope.numTween++,a.scope.tl.addLabel("step_"+a.scope.numTween),b.type){case"set":a.scope.tl.add(TweenMax.set(b.id,b.prop),b.delay);break;case"to":a.scope.tl.add(TweenMax.to(b.id,b.time,b.prop),b.delay);break;case"from":a.scope.tl.add(TweenMax.from(b.id,b.time,b.prop),b.delay);break;case"fromTo":a.scope.tl.add(TweenMax.fromTo(b.id,b.time,b.propInit,b.propEnd),b.delay);break;case"call":a.scope.tl.add(TweenMax.call(b.callBackFunction),b.delay)}}),a.scope.tl.addCallback(function(){a.scope.endTimeLine(a.scope.timelineData.loopIteration,a.scope.timelineData.loopLabelInit)}),void 0==a.scope.timelineData.initLabel||0==a.scope.timelineData.initLabel?a.scope.tl.resume(0):a.scope.tl.resume(a.scope.timelineData.initLabel),void 0==a.scope.timelineData.addPauseAt||0==a.scope.timelineData.addPauseAt?console.log("addPause undefined"):(console.log("addPause defined"),a.scope.addPauseAt(a.scope.timelineData.addPauseAt))},a.prototype.endTimeLine=function(b,c){if(1!=b){if(b==-1||void 0==b)a.scope.tl.resume(0);else{if(a.scope.iteration++,b>1&&a.scope.iteration==b-1){var d;void 0==a.scope.timelineData.loopLabelEnd||0==a.scope.timelineData.loopLabelEnd?(d=a.scope.tl.getLabelsArray()[a.scope.tl.getLabelsArray().length-1],a.scope.lastLabelName=d.name):(d=a.scope.timelineData.loopLabelEnd,console.log(d),a.scope.lastLabelName=d),a.scope.tl.addPause(a.scope.lastLabelName)}if(a.scope.iteration==b)return}void 0!=c||0==c?a.scope.tl.resume(c):a.scope.tl.resume(0)}},a.prototype.addPauseAt=function(b){a.scope.tl.addPause(b)},a.prototype.addListeners=function(){a.scope.containerJDMBanner.addEventListener("click",a.scope.goClickTag)},a.prototype.goClickTag=function(){},a}();