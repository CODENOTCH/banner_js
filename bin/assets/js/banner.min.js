var Banner=function(){function a(b,c,d,e,f){a.scope=this,this.containerBanner=b,this.imgPath=c,this.frameData=d,this.timelineData=f,this.dataBanner,this.arrayFrames=[],this.arrayElements=[],this.counterImg=0,this.totalImg=0,this.iteration=0,this.numTween=0,this.lastLabelName,this.clicktagFunction=e,this.configureBanner()}return a.prototype.configureBanner=function(){if(this.dataBanner={width:this.containerBanner.getAttribute("data-w"),height:this.containerBanner.getAttribute("data-h"),bgColor:this.containerBanner.getAttribute("data-bg-color"),border:this.containerBanner.getAttribute("data-border"),preload:this.containerBanner.getAttribute("data-preload"),cover:this.containerBanner.getAttribute("data-cover")},this.containerBanner.style.width=this.dataBanner.width+"px",this.containerBanner.style.height=this.dataBanner.height+"px",this.containerBanner.style.backgroundColor=this.dataBanner.bgColor,this.containerBanner.style.border=this.dataBanner.border,"true"==this.dataBanner.cover){var a=document.createElement("div");a.style.backgroundColor=this.dataBanner.bgColor,a.style.zIndex=2,a.setAttribute("id","cover"),this.containerBanner.appendChild(a)}var b=0,c=[];for(var d in this.frameData)this.arrayElements.push(this.frameData[d]),c.push(d.toString()),b++;for(var e=0;e<b;e++)this.totalImg+=this.arrayElements[e].length;for(var f=0;f<b;f++){var g=document.createElement("div");g.classList.add("frame"),g.setAttribute("id",c[f]),this.containerBanner.appendChild(g),this.arrayFrames.push(g),this.setImgs(this.arrayFrames[f],this.arrayElements[f])}this.setClickTag()},a.prototype.setImgs=function(b,c){c.forEach(function(c){var d=new Image;d.src=a.scope.imgPath+c,b.appendChild(d);var e=c.indexOf("."),f=c.substr(0,e);d.setAttribute("id",f),d.onload=a.scope.imgLoaded()})},a.prototype.imgLoaded=function(){a.scope.counterImg++,a.scope.counterImg==a.scope.totalImg&&a.scope.createTimeLine()},a.prototype.createTimeLine=function(){a.scope.tl=new TimelineMax,a.scope.tl.paused(!0),a.scope.timelineData.arrayTween.forEach(function(b){switch(a.scope.numTween++,a.scope.tl.addLabel("step_"+a.scope.numTween),b.type){case"set":a.scope.tl.add(TweenMax.set(b.id,b.prop),b.delay);break;case"to":a.scope.tl.add(TweenMax.to(b.id,b.time,b.prop),b.delay);break;case"from":a.scope.tl.add(TweenMax.from(b.id,b.time,b.prop),b.delay);break;case"fromTo":a.scope.tl.add(TweenMax.fromTo(b.id,b.time,b.propInit,b.propEnd),b.delay)}}),a.scope.tl.addCallback(function(){a.scope.endTimeLine(a.scope.timelineData.loopIteration,a.scope.timelineData.loopLabelInit)}),void 0==a.scope.timelineData.initLabel||0==a.scope.timelineData.initLabel?a.scope.tl.resume(0):a.scope.tl.resume(a.scope.timelineData.initLabel),void 0!=a.scope.timelineData.addPauseAt&&a.scope.addPauseAt(a.scope.timelineData.addPauseAt)},a.prototype.endTimeLine=function(b,c){if(1!=b){if(b==-1||void 0==b)a.scope.tl.resume(0);else{if(a.scope.iteration++,b>1&&a.scope.iteration==b-1){var d;void 0==a.scope.timelineData.loopLabelEnd||0==a.scope.timelineData.loopLabelEnd?(d=a.scope.tl.getLabelsArray()[a.scope.tl.getLabelsArray().length-1],a.scope.lastLabelName=d.name):(d=a.scope.timelineData.loopLabelEnd,a.scope.lastLabelName=d),a.scope.tl.addPause(a.scope.lastLabelName)}if(a.scope.iteration==b)return}void 0!=c||0==c?a.scope.tl.resume(c):a.scope.tl.resume(0)}},a.prototype.addPauseAt=function(b){a.scope.tl.addPause(b)},a.prototype.setClickTag=function(){this.clicktag=document.createElement("div"),this.clicktag.setAttribute("id","clicktag"),this.clicktag.style.position="absolute",this.clicktag.style.width=this.containerBanner.style.width,this.clicktag.style.height=this.containerBanner.style.height,this.clicktag.style.opacity=0,this.clicktag.style.cursor="pointer",this.clicktag.style.zIndex=1,this.containerBanner.appendChild(this.clicktag),this.clicktag.addEventListener("click",a.scope.goClickTag)},a.prototype.goClickTag=function(){a.scope.clicktagFunction()},a}();